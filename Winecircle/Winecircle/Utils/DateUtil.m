//
//  DateUtil.m
//  MyCalendar
//
//  Created by jh niu on 12-8-21.
//  Copyright (c) 2012å¹´ sunday. All rights reserved.
//

#import "DateUtil.h"

@interface DateUtil ()

@end

@implementation DateUtil

#define DATE_COMPONENTS (NSYearCalendarUnit| NSMonthCalendarUnit | NSDayCalendarUnit | NSWeekCalendarUnit |  NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit | NSWeekdayCalendarUnit | NSWeekdayOrdinalCalendarUnit)
#define CURRENT_CALENDAR [NSCalendar currentCalendar]
const  int START_YEAR =1901;      
const  int END_YEAR   =2050; 

static int32_t gLunarHolDay[]=      
{      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1901      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X87, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1902      
    0X96, 0XA5, 0X87, 0X96, 0X87, 0X87, 0X79, 0X69, 0X69, 0X69, 0X78, 0X78,   //1903      
    0X86, 0XA5, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X78, 0X87,   //1904      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1905      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1906      
    0X96, 0XA5, 0X87, 0X96, 0X87, 0X87, 0X79, 0X69, 0X69, 0X69, 0X78, 0X78,   //1907      
    0X86, 0XA5, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1908      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1909      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1910      
    0X96, 0XA5, 0X87, 0X96, 0X87, 0X87, 0X79, 0X69, 0X69, 0X69, 0X78, 0X78,   //1911      
    0X86, 0XA5, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1912      
    0X95, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1913      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1914      
    0X96, 0XA5, 0X97, 0X96, 0X97, 0X87, 0X79, 0X79, 0X69, 0X69, 0X78, 0X78,   //1915      
    0X96, 0XA5, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1916      
    0X95, 0XB4, 0X96, 0XA6, 0X96, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X87,   //1917      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X77,   //1918      
    0X96, 0XA5, 0X97, 0X96, 0X97, 0X87, 0X79, 0X79, 0X69, 0X69, 0X78, 0X78,   //1919      
    0X96, 0XA5, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1920      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X87,   //1921      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X77,   //1922      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X87, 0X79, 0X79, 0X69, 0X69, 0X78, 0X78,   //1923      
    0X96, 0XA5, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1924      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X87,   //1925      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1926      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X87, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1927      
    0X96, 0XA5, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1928      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1929      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1930      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X87, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1931      
    0X96, 0XA5, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1932      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1933      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1934      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1935      
    0X96, 0XA5, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1936      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1937      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1938      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1939      
    0X96, 0XA5, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1940      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1941      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1942      
    0X96, 0XA4, 0X96, 0X96, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1943      
    0X96, 0XA5, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1944      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1945      
    0X95, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X77,   //1946      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1947      
    0X96, 0XA5, 0XA6, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //1948      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X79, 0X78, 0X79, 0X77, 0X87,   //1949      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X77,   //1950      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X79, 0X79, 0X79, 0X69, 0X78, 0X78,   //1951      
    0X96, 0XA5, 0XA6, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //1952      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1953      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X78, 0X79, 0X78, 0X68, 0X78, 0X87,   //1954      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1955      
    0X96, 0XA5, 0XA5, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //1956      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1957      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1958      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1959      
    0X96, 0XA4, 0XA5, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1960      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1961      
    0X96, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1962      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1963      
    0X96, 0XA4, 0XA5, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1964      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1965      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1966      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1967      
    0X96, 0XA4, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1968      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1969      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1970      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X79, 0X69, 0X78, 0X77,   //1971      
    0X96, 0XA4, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1972      
    0XA5, 0XB5, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1973      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1974      
    0X96, 0XB4, 0X96, 0XA6, 0X97, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X77,   //1975      
    0X96, 0XA4, 0XA5, 0XB5, 0XA6, 0XA6, 0X88, 0X89, 0X88, 0X78, 0X87, 0X87,   //1976      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //1977      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X78, 0X87,   //1978      
    0X96, 0XB4, 0X96, 0XA6, 0X96, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X77,   //1979      
    0X96, 0XA4, 0XA5, 0XB5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1980      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X77, 0X87,   //1981      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1982      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X78, 0X79, 0X78, 0X69, 0X78, 0X77,   //1983      
    0X96, 0XB4, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X87,   //1984      
    0XA5, 0XB4, 0XA6, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //1985      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1986      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X79, 0X78, 0X69, 0X78, 0X87,   //1987      
    0X96, 0XB4, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //1988      
    0XA5, 0XB4, 0XA5, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1989      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //1990      
    0X95, 0XB4, 0X96, 0XA5, 0X86, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1991      
    0X96, 0XB4, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //1992      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1993      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1994      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X76, 0X78, 0X69, 0X78, 0X87,   //1995      
    0X96, 0XB4, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //1996      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //1997      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //1998      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //1999      
    0X96, 0XB4, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //2000      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2001      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //2002      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //2003      
    0X96, 0XB4, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //2004      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2005      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2006      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X69, 0X78, 0X87,   //2007      
    0X96, 0XB4, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X87, 0X78, 0X87, 0X86,   //2008      
    0XA5, 0XB3, 0XA5, 0XB5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2009      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2010      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X78, 0X87,   //2011      
    0X96, 0XB4, 0XA5, 0XB5, 0XA5, 0XA6, 0X87, 0X88, 0X87, 0X78, 0X87, 0X86,   //2012      
    0XA5, 0XB3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X87,   //2013      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2014      
    0X95, 0XB4, 0X96, 0XA5, 0X96, 0X97, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //2015      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X87, 0X88, 0X87, 0X78, 0X87, 0X86,   //2016      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X87,   //2017      
    0XA5, 0XB4, 0XA6, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2018      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //2019      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X78, 0X87, 0X86,   //2020      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //2021      
    0XA5, 0XB4, 0XA5, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2022      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X79, 0X77, 0X87,   //2023      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X78, 0X87, 0X96,   //2024      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //2025      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2026      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //2027      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X78, 0X87, 0X96,   //2028      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //2029      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2030      
    0XA5, 0XB4, 0X96, 0XA5, 0X96, 0X96, 0X88, 0X78, 0X78, 0X78, 0X87, 0X87,   //2031      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X78, 0X87, 0X96,   //2032      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X86,   //2033      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X78, 0X88, 0X78, 0X87, 0X87,   //2034      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2035      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X78, 0X87, 0X96,   //2036      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X86,   //2037      
    0XA5, 0XB3, 0XA5, 0XA5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2038      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2039      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X78, 0X87, 0X96,   //2040      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA5, 0XA6, 0X87, 0X88, 0X87, 0X78, 0X87, 0X86,   //2041      
    0XA5, 0XB3, 0XA5, 0XB5, 0XA6, 0XA6, 0X88, 0X88, 0X88, 0X78, 0X87, 0X87,   //2042      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2043      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X88, 0X87, 0X96,   //2044      
    0XA5, 0XC3, 0XA5, 0XB4, 0XA5, 0XA6, 0X87, 0X88, 0X87, 0X78, 0X87, 0X86,   //2045      
    0XA5, 0XB3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X88, 0X78, 0X87, 0X87,   //2046      
    0XA5, 0XB4, 0X96, 0XA5, 0XA6, 0X96, 0X88, 0X88, 0X78, 0X78, 0X87, 0X87,   //2047      
    0X95, 0XB4, 0XA5, 0XB4, 0XA5, 0XA5, 0X97, 0X87, 0X87, 0X88, 0X86, 0X96,   //2048      
    0XA4, 0XC3, 0XA5, 0XA5, 0XA5, 0XA6, 0X97, 0X87, 0X87, 0X78, 0X87, 0X86,   //2049      
    0XA5, 0XC3, 0XA5, 0XB5, 0XA6, 0XA6, 0X87, 0X88, 0X78, 0X78, 0X87, 0X87    //2050      
    
};    

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
	// Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
//è¯¥æ¥ææ¯è¯¥å¹´çç¬¬å å¨
+(int)getWeekOfYear:(NSDate *)date
{
    if(date==nil)
          date = [[[NSDate alloc] init]autorelease];
    
	NSDateComponents *components = [CURRENT_CALENDAR components:DATE_COMPONENTS fromDate:date];
   
	return [components week];

}
//è·åå¹´
+(NSUInteger)getYear:(NSDate *)date
{
    if(date==nil)
        date = [[[NSDate alloc] init]autorelease];
    NSDateComponents *dayComponents = [CURRENT_CALENDAR components:DATE_COMPONENTS fromDate:date];
    return [dayComponents year];
}
//è·åæ
+(NSUInteger)getMonth:(NSDate *)date
{
    if(date==nil)
           date = [[[NSDate alloc] init]autorelease];
    NSDateComponents *dayComponents = [CURRENT_CALENDAR components:DATE_COMPONENTS fromDate:date];
    return [dayComponents month];
}
 
//è¿åå½åæ¥æå¼å§å¨æ¥æ
+ (NSDate *)beginningOfWeek :(NSDate *)today
{
    if(today==nil)
           today = [[[NSDate alloc] init]autorelease];
    
    NSCalendar *gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]autorelease];    
    
    // Get the weekday component of the current date    
    NSDateComponents *weekdayComponents = [gregorian components:NSWeekdayCalendarUnit fromDate:today];    
    
    
    
    NSDateComponents *componentsToSubtract = [[[NSDateComponents alloc] init]autorelease];    
    
    [componentsToSubtract setDay: 0 - ([weekdayComponents weekday]-2)];    
    
    NSDate *beginningOfWeek = [gregorian dateByAddingComponents:componentsToSubtract toDate:today options:0];    
    
    
    
    NSDateComponents *components = [gregorian components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate: beginningOfWeek];    
    
    beginningOfWeek = [gregorian dateFromComponents:components];   
    
    return beginningOfWeek;
}
//è¿ådayå¤©åçæ¥æ(è¥dayä¸ºè´æ°,åä¸º|day|å¤©åçæ¥æ)
+(NSDate *)dateAfterDay:(int)day :(NSDate *)today
{
    if(today==nil)
        today = [[[NSDate alloc] init]autorelease];  
 
    NSCalendar *calendar = [NSCalendar currentCalendar];
    
    NSDateComponents *componentsToAdd = [[[NSDateComponents alloc] init]autorelease];
    
    [componentsToAdd setDay:day];
    NSDate *dateAfterDay = [calendar dateByAddingComponents:componentsToAdd toDate:today options:0];
    
    return dateAfterDay;
}
 
//è¿åå½åå¨çå¨æ«
+(NSDate *)endOfWeek :(NSDate *)today
{
    if(today==nil)
        today = [[[NSDate alloc] init]autorelease];  
    
    NSCalendar *calendar = [NSCalendar currentCalendar];
    // Get the weekday component of the current date
    NSDateComponents *weekdayComponents = [calendar components:NSWeekdayCalendarUnit fromDate:today];
    NSDateComponents *componentsToAdd = [[[NSDateComponents alloc] init]autorelease];
    // to get the end of week for a particular date, add (7 - weekday) days
    [componentsToAdd setDay:(7 - [weekdayComponents weekday])];
    NSDate *endOfWeek = [calendar dateByAddingComponents:componentsToAdd toDate:today options:0];
    
    return endOfWeek;
}
+(NSString*)getChineseCalendarWithDate:(NSDate *)date{  
    /*
     NSArray *chineseYears = [NSArray arrayWithObjects:  
     @"ç²å­", @"ä¹ä¸", @"ä¸å¯", @"ä¸å¯",  @"æè¾°",  @"å·±å·³",  @"åºå",  @"è¾æª",  @"å£¬ç³",  @"ç¸é",  
     @"ç²æ",   @"ä¹äº¥",  @"ä¸å­",  @"ä¸ä¸", @"æå¯",   @"å·±å¯",  @"åºè¾°",  @"è¾å·±",  @"å£¬å",  @"ç¸æª",  
     @"ç²ç³",   @"ä¹é",  @"ä¸æ",  @"ä¸äº¥",  @"æå­",  @"å·±ä¸",  @"åºå¯",  @"è¾å¯",  @"å£¬è¾°",  @"ç¸å·³",  
     @"ç²å",   @"ä¹æª",  @"ä¸ç³",  @"ä¸é",  @"ææ",  @"å·±äº¥",  @"åºå­",  @"è¾ä¸",  @"å£¬å¯",  @"ç¸ä¸",  
     @"ç²è¾°",   @"ä¹å·³",  @"ä¸å",  @"ä¸æª",  @"æç³",  @"å·±é",  @"åºæ",  @"è¾äº¥",  @"å£¬å­",  @"ç¸ä¸",  
     @"ç²å¯",   @"ä¹å¯",  @"ä¸è¾°",  @"ä¸å·³",  @"æå",  @"å·±æª",  @"åºç³",  @"è¾é",  @"å£¬æ",  @"ç¸äº¥", nil];  
     
     NSArray *chineseMonths=[NSArray arrayWithObjects:  
     @"æ­£æ", @"äºæ", @"ä¸æ", @"åæ", @"äºæ", @"å­æ", @"ä¸æ", @"å«æ",   
     @"ä¹æ", @"åæ", @"å¬æ", @"èæ", nil];  
     
     */
    NSArray *chineseDays=[NSArray arrayWithObjects:  
                          @"åä¸", @"åäº", @"åä¸", @"åå", @"åäº", @"åå­", @"åä¸", @"åå«", @"åä¹", @"åå",   
                          @"åä¸", @"åäº", @"åä¸", @"åå", @"åäº", @"åå­", @"åä¸", @"åå«", @"åä¹", @"äºå",  
                          @"å»¿ä¸", @"å»¿äº", @"å»¿ä¸", @"å»¿å", @"å»¿äº", @"å»¿å­", @"å»¿ä¸", @"å»¿å«", @"å»¿ä¹", @"ä¸å", @"åä¸",  nil];  
    
    
    NSCalendar *localeCalendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSChineseCalendar]autorelease];  
    
    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;  
    
    NSDateComponents *localeComp = [localeCalendar components:unitFlags fromDate:date];  
    
    //NSLog(@"%d_%d_%d  %@",localeComp.year,localeComp.month,localeComp.day, localeComp.date);  
    
    // NSString *y_str = [chineseYears objectAtIndex:localeComp.year-1];  
    // NSString *m_str = [chineseMonths objectAtIndex:localeComp.month-1];  
    NSString *d_str = [chineseDays objectAtIndex:localeComp.day];  
    
    // NSString *chineseCal_str =[NSString stringWithFormat: @"%@_%@_%@",y_str,m_str,d_str];  
    NSString *chineseCal_str =[NSString stringWithFormat: @"%@",d_str];
    return chineseCal_str;  
}  
+(NSString*)getChineseCalendarWithfullDate:(NSDate *)date{  
    /*
     NSArray *chineseYears = [NSArray arrayWithObjects:  
     @"ç²å­", @"ä¹ä¸", @"ä¸å¯", @"ä¸å¯",  @"æè¾°",  @"å·±å·³",  @"åºå",  @"è¾æª",  @"å£¬ç³",  @"ç¸é",  
     @"ç²æ",   @"ä¹äº¥",  @"ä¸å­",  @"ä¸ä¸", @"æå¯",   @"å·±å¯",  @"åºè¾°",  @"è¾å·±",  @"å£¬å",  @"ç¸æª",  
     @"ç²ç³",   @"ä¹é",  @"ä¸æ",  @"ä¸äº¥",  @"æå­",  @"å·±ä¸",  @"åºå¯",  @"è¾å¯",  @"å£¬è¾°",  @"ç¸å·³",  
     @"ç²å",   @"ä¹æª",  @"ä¸ç³",  @"ä¸é",  @"ææ",  @"å·±äº¥",  @"åºå­",  @"è¾ä¸",  @"å£¬å¯",  @"ç¸ä¸",  
     @"ç²è¾°",   @"ä¹å·³",  @"ä¸å",  @"ä¸æª",  @"æç³",  @"å·±é",  @"åºæ",  @"è¾äº¥",  @"å£¬å­",  @"ç¸ä¸",  
     @"ç²å¯",   @"ä¹å¯",  @"ä¸è¾°",  @"ä¸å·³",  @"æå",  @"å·±æª",  @"åºç³",  @"è¾é",  @"å£¬æ",  @"ç¸äº¥", nil];  
     */
     NSArray *chineseMonths=[NSArray arrayWithObjects:  
     @"æ­£æ", @"äºæ", @"ä¸æ", @"åæ", @"äºæ", @"å­æ", @"ä¸æ", @"å«æ",   
     @"ä¹æ", @"åæ", @"å¬æ", @"èæ", nil];  
     
     
    NSArray *chineseDays=[NSArray arrayWithObjects:  
                          @"åä¸", @"åäº", @"åä¸", @"åå", @"åäº", @"åå­", @"åä¸", @"åå«", @"åä¹", @"åå",   
                          @"åä¸", @"åäº", @"åä¸", @"åå", @"åäº", @"åå­", @"åä¸", @"åå«", @"åä¹", @"äºå",  
                          @"å»¿ä¸", @"å»¿äº", @"å»¿ä¸", @"å»¿å", @"å»¿äº", @"å»¿å­", @"å»¿ä¸", @"å»¿å«", @"å»¿ä¹", @"ä¸å",  nil];  
    
    
    NSCalendar *localeCalendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSChineseCalendar]autorelease];  
    
    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;  
    
    NSDateComponents *localeComp = [localeCalendar components:unitFlags fromDate:date];  
    
    //NSLog(@"%d_%d_%d  %@",localeComp.year,localeComp.month,localeComp.day, localeComp.date);  
    
     //NSString *y_str = [chineseYears objectAtIndex:localeComp.year-1];  
     NSString *m_str = [chineseMonths objectAtIndex:localeComp.month-1];  
    NSString *d_str = [chineseDays objectAtIndex:localeComp.day-1];  
    
     NSString *chineseCal_str =[NSString stringWithFormat: @"%@%@",m_str,d_str];  
    //NSString *chineseCal_str =[NSString stringWithFormat: @"%@",d_str];
    return chineseCal_str;  
}  
//è·åæ¥
+ (NSUInteger)getDay:(NSDate *)today
{
    if(today==nil)
        today = [[[NSDate alloc] init]autorelease];   
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *dayComponents = [calendar components:(NSDayCalendarUnit) fromDate:today];
    return [dayComponents day];
}
//è½¬ä¸ºNSStringç±»åç
+ (NSDate *)dateFromString:(NSString *)string :(NSString *)stringtype{
    if(stringtype==nil||[stringtype isEqualToString:@""]){
        stringtype=@"yyyy-MM-dd";
    }
    return [self dateFromString:string withFormat:stringtype];
}

+ (NSDate *)dateFromString:(NSString *)string withFormat:(NSString *)format {
    NSDateFormatter *inputFormatter = [[[NSDateFormatter alloc] init]autorelease];
    [inputFormatter setDateFormat:format];
    NSDate *date = [inputFormatter dateFromString:string];
    return date;
}


+(NSString *)getLunarHoliDayDate:(NSDate *)date{  
    
    
    date= [self dateAfterDay:1 :date];
    
    NSTimeInterval timeInterval_day = 60*60*24;  
    
    NSDate *nextDay_date = [NSDate dateWithTimeInterval:timeInterval_day sinceDate:date];  
    
    
    
    NSCalendar *localeCalendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSChineseCalendar]autorelease];  
    
    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;  
    
    
    
    NSDateComponents *localeComp = [localeCalendar components:unitFlags fromDate:nextDay_date];  
    
    if ( 1 == localeComp.month && 1 == localeComp.day ) {  
        
       
        return @"é¤å¤";  
    }  
    
    
    
    NSDictionary *chineseHoliDay = [NSDictionary dictionaryWithObjectsAndKeys:  
                                    
                                    @"æ¥è", @"1-1",  
                                    
                                    @"åå®µ", @"1-15",  
                                    
                                    @"ç«¯å", @"5-5",  
                                    
                                    @"ä¸å¤", @"7-7",  
                                    
                                    @"ä¸­å", @"7-15",  
                                    
                                    @"ä¸­ç§", @"8-15",  
                                    
                                    @"éé³", @"9-9",  
                                    
                                    @"èå«", @"12-8",  
                                    
                                    @"å°å¹´", @"12-24",  
                                    
                                    nil];  
    
    localeComp = [localeCalendar components:unitFlags fromDate:date];  
    
    NSString *key_str = [NSString stringWithFormat:@"%d-%d",localeComp.month,localeComp.day];  
    
    
    return [chineseHoliDay objectForKey:key_str];  
    
    
    
}  

+(NSString *)getLunarSpecialDate:(NSDate *)date  {   
    
    NSArray *chineseDays=[NSArray arrayWithObjects:  
                          @"å°å¯", @"å¤§å¯", @"ç«æ¥", @"é¨æ°´", @"æè°", @"æ¥å",   
                          
                          @"æ¸æ", @"è°·é¨", @"ç«å¤", @"å°æ»¡", @"èç§", @"å¤è³",   
                          
                          @"å°æ", @"å¤§æ", @"ç«ç§", @"å¤æ", @"ç½é²", @"ç§å",   
                          
                          @"å¯é²", @"éé", @"ç«å¬", @"å°éª", @"å¤§éª", @"å¬è³", nil];  
    
    
    int array_index = ([self getYear:date] - START_YEAR)*12+[self getMonth:date] -1 ;  
    
    
    int64_t flag = gLunarHolDay[array_index];     
    int64_t day;  
    
    if([self getDay:date] <15)     
        day= 15 - ((flag>>4)&0x0f);      
    else      
        day = ((flag)&0x0f)+15;  
    
    int index = -1;  
    
    if([self getDay:date] == day){   
        index = ([self getMonth:date]-1) *2 + ([self getDay:date]>15? 1: 0);   
    }  
    
    if ( index >= 0  && index < [chineseDays count] ) {  
        return [chineseDays objectAtIndex:index];  
    } else {  
        return nil;  
    }  
    
}  
//è¿åè¯¥æçç¬¬ä¸å¤©
+ (NSDate *)beginningOfMonth:(NSDate *)date
{
    return [self dateAfterDay:-[self getDay:date] + 1:date];
}
//è¯¥æçæåä¸å¤©
+(NSDate *)endOfMonth:(NSDate *)date
{
    NSDate * tempdate=[self beginningOfMonth:date];
    NSDate * tempdate1=[self dateafterMonth:1:tempdate];
    NSDate * tempdate2= [self dateAfterDay:-1:tempdate1];
    return    tempdate2;
}
//monthä¸ªæåçæ¥æ
+ (NSDate *)dateafterMonth:(int)month :(NSDate *)date
{
    
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *componentsToAdd = [[NSDateComponents alloc] init];
    [componentsToAdd setMonth:month];
    NSDate *dateAfterMonth = [calendar dateByAddingComponents:componentsToAdd toDate:date options:0];
    [componentsToAdd release];
    
    return dateAfterMonth;
}

//å¾å°æ¶é¤æ¶å·®å·®å¼åçæ¬å°date string. è¿åå¼å¦ï¼ "2013-05-20 10:54:13 +0000"
+(NSDate *)getLocaleDateStr:(NSDate *)date{
    NSTimeZone *zone = [NSTimeZone systemTimeZone];
    NSInteger interval = [zone secondsFromGMTForDate: date];
    NSDate *localeDate = [date dateByAddingTimeInterval: interval]; 
    return localeDate;
}
@end
